<mat-form-field appearance="fill" class="w-100 default-form-field-fill">
    <mat-label>Segment</mat-label>
    <input
        type="text"
        matInput
        [matAutocomplete]="segmentAutoComplete"
        #segmentInput
        [formControl]="segmentForm"
        [readonly]="readOnly ? 'readonly' : null"
    />
    <mat-autocomplete
        #segmentAutoComplete="matAutocomplete"
        (optionSelected)="handleSegmentoSelection($event)"
        [displayWith]="segmentDisplayFunction"
    >
        <msg91-cdk-scroll (fetchNextPage)="fetchNextSegmentPage()">
            <mat-option value="">
                <a href="javascript:void(0);" class="text-primary fw-bold d-flex align-items-center"
                    ><mat-icon class="mat-icon-16 mr-0">add</mat-icon>&nbsp;Create Segment</a
                >
            </mat-option>
            <mat-option disabled value="" *ngIf="!(segments$ | async)?.length"> No Segment Found </mat-option>
            <mat-option [value]="segment" *ngFor="let segment of segments$ | async">
                {{ segment.name }}
            </mat-option>
        </msg91-cdk-scroll>
    </mat-autocomplete>
    <button
        mat-icon-button
        matSuffix
        *ngIf="showClose"
        class="cursor-pointer icon-btn-md"
        color="primary"
        (click)="clearSegment()"
    >
        <mat-icon class="mat-icon-20 text-dark">close</mat-icon>
    </button>
    <mat-error *ngIf="segmentForm.touched">
        <mat-error *ngIf="segmentForm.errors?.required"> Segment field is required. </mat-error>
        <mat-error *ngIf="segmentForm?.errors?.elementExistsInList"> Select Segment from dropdown </mat-error>
    </mat-error>
</mat-form-field>
